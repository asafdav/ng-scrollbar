/**
 * ng-scrollbar
 * @version v0.0.8 - 2016-10-11
 * @link https://github.com/asafdav/ng-scrollbar
 * @author Asaf David <asafdav@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";var app=angular.module("ngScrollbar",[]);app.directive("ngScrollbar",["$parse","$window",function(a,b){return{restrict:"A",replace:!0,transclude:!0,scope:{showYScrollbar:"=?isBarShown",theme:"@?",path:"@?"},templateUrl:"../dist/ng-scrollbar.html",controller:"MainCtrl",link:function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p={bottom:d.hasOwnProperty("bottom")},q=angular.element(b),r=!!q[0].addEventListener,s=!!q[0].removeEventListener,t={top:0},u={top:0},v=function(){k={position:"relative",overflow:"hidden","max-width":"100%",height:"100%"},u.height&&(k.height=u.height+"px"),l={position:"absolute",height:t.height+"px",top:t.top+"px"},m={position:"relative","line-height":t.height+"px"},n={position:"relative",top:u.top+"px",overflow:"hidden"}},w=function(){h.css("top",t.top+"px");var a=t.top/u.height;u.top=-Math.round(u.scrollHeight*a),f.css("top",u.top+"px")},x=function(a){var b=a.hasOwnProperty("offsetY")?a.offsetY:a.layerY,c=Math.max(0,Math.min(parseInt(t.trackHeight,10)-parseInt(t.height,10),b));t.top=c,w(),a.stopPropagation()},y=function(a){var b,c=40,d=a,e=d.detail,f=d.wheelDelta,g=225,h=g-1;return e=e?f&&(b=f/e)?e/b:-e/1.35:f/120,e=e<1?e<-1?(-Math.pow(e,2)-h)/g:e:(Math.pow(e,2)+h)/g,a.delta=Math.min(Math.max(e/2,-1),1),a.delta=a.delta*c,t.top=Math.max(0,Math.min(parseInt(u.height,10)-parseInt(t.height,10),parseInt(t.top,10)-a.delta)),w(),!!a.preventDefault&&void a.preventDefault()},z=0,A=function(a,b,c){t.top=Math.max(0,Math.min(parseInt(t.trackHeight,10)-parseInt(t.height,10),c)),a.stopPropagation()},B=function(a){var b=0,c=a.pageY-h[0].scrollTop-z;A(a,b,c),w()},C=function(a){q.off("mousemove",B),q.off("mouseup",C),a.stopPropagation()},D=function(a){var b=0,c=a.originalEvent.changedTouches[0].pageY-h[0].scrollTop-z;A(a,b,c),w()},E=function(a){q.off("touchmove",D),q.off("touchend",E),a.stopPropagation()},F=function(a){var b=void 0!==q[0].onmousewheel?"mousewheel":"DOMMouseScroll";r?a.addEventListener(b,y,!1):a.attachEvent("onmousewheel",y)},G=function(a){var b=void 0!==q[0].onmousewheel?"mousewheel":"DOMMouseScroll";s?a.removeEventListener(b,y,!1):a.detachEvent("onmousewheel",y)},H=function(b){b=p.bottom||b,e=angular.element(c.children()[0]),f=angular.element(e.children()[0]),g=angular.element(e.children()[1]),h=angular.element(angular.element(g.children()[0]).children()[0]),i=angular.element(h.children()[0]),j=angular.element(angular.element(g.children()[0]).children()[1]),u.height=c[0].offsetHeight,u.scrollHeight=f[0].scrollHeight,u.height<u.scrollHeight?(a.showYScrollbar=!0,a.$emit("scrollbar.show"),t.height=Math.round(u.height/u.scrollHeight*u.height),t.trackHeight=u.height,v(),c.css({overflow:"hidden"}),e.css(k),f.css(n),h.css(l),i.css(m),j.bind("click",x),F(f[0]),h.on("mousedown",function(a){z=a.pageY-h[0].offsetTop,q.on("mouseup",C),q.on("mousemove",B),a.preventDefault()}),h.on("touchstart",function(a){z=a.originalEvent.changedTouches[0].pageY-h[0].offsetTop,q.on("touchend",E),q.on("touchmove",D),a.preventDefault()}),b?(p.bottom=!1,t.top=parseInt(u.height,10)-parseInt(t.height,10)):t.top=Math.max(0,Math.min(parseInt(u.height,10)-parseInt(t.height,10),parseInt(t.top,10))),w()):(a.showYScrollbar=!1,a.$emit("scrollbar.hide"),h.off("mousedown"),G(f[0]),f.attr("style","position:relative;top:0"),e.css({height:"100%"}))},I=function(b,c){null!=o&&clearTimeout(o);var d=!!c&&!!c.rollToBottom;o=setTimeout(function(){u.height=null,H(d),a.$$phase||a.$digest(),a.$parent.$$phase||a.$parent.$digest()},72)};H(),d.rebuildOn&&d.rebuildOn.split(" ").forEach(function(b){a.$on(b,I)}),d.hasOwnProperty("rebuildOnResize")&&q.on("resize",I)}}}]),app.controller("MainCtrl",["$scope","$document","THEMES",function(a,b,c){function d(a){return!!a&&c.indexOf(a)>-1}function e(a){var c=b.find("head")[0];angular.element(c).append('<link href="'+a+'dist/ng-scrollbar.min.css" rel="stylesheet"></link>')}function f(b){d(b)?a.theme=b:a.theme="default"}function g(b){b?/\/$|\\$/.test(b)?a.path=b:a.path=b+"/":a.path="../"}f(a.theme),g(a.path),e(a.path),a.chooseTheme=f,a.choosePath=g,a.appendStyleSheet=e}]),app.constant("THEMES",["default","mac"]);